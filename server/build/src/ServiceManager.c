/* ServiceManager.c generated by valac 0.32.1, the Vala compiler
 * generated from ServiceManager.vala, do not modify */

/*
*   Manage all services
*/

#include <glib.h>
#include <glib-object.h>


#define TYPE_SERVICE_MANAGER (service_manager_get_type ())
#define SERVICE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_SERVICE_MANAGER, ServiceManager))
#define SERVICE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_SERVICE_MANAGER, ServiceManagerClass))
#define IS_SERVICE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_SERVICE_MANAGER))
#define IS_SERVICE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_SERVICE_MANAGER))
#define SERVICE_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_SERVICE_MANAGER, ServiceManagerClass))

typedef struct _ServiceManager ServiceManager;
typedef struct _ServiceManagerClass ServiceManagerClass;
typedef struct _ServiceManagerPrivate ServiceManagerPrivate;

#define TYPE_COMMAND_SERVICE (command_service_get_type ())
#define COMMAND_SERVICE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_COMMAND_SERVICE, CommandService))
#define COMMAND_SERVICE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_COMMAND_SERVICE, CommandServiceClass))
#define IS_COMMAND_SERVICE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_COMMAND_SERVICE))
#define IS_COMMAND_SERVICE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_COMMAND_SERVICE))
#define COMMAND_SERVICE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_COMMAND_SERVICE, CommandServiceClass))

typedef struct _CommandService CommandService;
typedef struct _CommandServiceClass CommandServiceClass;

#define TYPE_LOGGER (logger_get_type ())
#define LOGGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_LOGGER, Logger))
#define LOGGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_LOGGER, LoggerClass))
#define IS_LOGGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_LOGGER))
#define IS_LOGGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_LOGGER))
#define LOGGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_LOGGER, LoggerClass))

typedef struct _Logger Logger;
typedef struct _LoggerClass LoggerClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _logger_unref0(var) ((var == NULL) ? NULL : (var = (logger_unref (var), NULL)))
#define _g_main_loop_unref0(var) ((var == NULL) ? NULL : (var = (g_main_loop_unref (var), NULL)))

struct _ServiceManager {
	GObject parent_instance;
	ServiceManagerPrivate * priv;
};

struct _ServiceManagerClass {
	GObjectClass parent_class;
};

struct _ServiceManagerPrivate {
	CommandService* _commandService;
	Logger* _log;
};


static gpointer service_manager_parent_class = NULL;

GType service_manager_get_type (void) G_GNUC_CONST;
GType command_service_get_type (void) G_GNUC_CONST;
gpointer logger_ref (gpointer instance);
void logger_unref (gpointer instance);
GParamSpec* param_spec_logger (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_logger (GValue* value, gpointer v_object);
void value_take_logger (GValue* value, gpointer v_object);
gpointer value_get_logger (const GValue* value);
GType logger_get_type (void) G_GNUC_CONST;
#define SERVICE_MANAGER_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_SERVICE_MANAGER, ServiceManagerPrivate))
enum  {
	SERVICE_MANAGER_DUMMY_PROPERTY
};
Logger* logger_GetInstance (void);
static void service_manager_OnError (ServiceManager* self, GError* e);
void logger_Error (Logger* self, GError* e);
ServiceManager* service_manager_new (void);
ServiceManager* service_manager_construct (GType object_type);
CommandService* command_service_new (void);
CommandService* command_service_construct (GType object_type);
static void _service_manager_OnError_command_service_on_error (CommandService* _sender, GError* e, gpointer self);
void service_manager_Start (ServiceManager* self);
void command_service_Start (CommandService* self);
static void service_manager_finalize (GObject* obj);


static void service_manager_OnError (ServiceManager* self, GError* e) {
	Logger* _tmp0_ = NULL;
	GError* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_log;
	_tmp1_ = e;
	logger_Error (_tmp0_, _tmp1_);
}


static void _service_manager_OnError_command_service_on_error (CommandService* _sender, GError* e, gpointer self) {
	service_manager_OnError ((ServiceManager*) self, e);
}


ServiceManager* service_manager_construct (GType object_type) {
	ServiceManager * self = NULL;
	CommandService* _tmp0_ = NULL;
	CommandService* _tmp1_ = NULL;
	self = (ServiceManager*) g_object_new (object_type, NULL);
	_tmp0_ = command_service_new ();
	_g_object_unref0 (self->priv->_commandService);
	self->priv->_commandService = _tmp0_;
	_tmp1_ = self->priv->_commandService;
	g_signal_connect_object (_tmp1_, "on-error", (GCallback) _service_manager_OnError_command_service_on_error, self, 0);
	return self;
}


ServiceManager* service_manager_new (void) {
	return service_manager_construct (TYPE_SERVICE_MANAGER);
}


void service_manager_Start (ServiceManager* self) {
	CommandService* _tmp0_ = NULL;
	GMainLoop* _tmp1_ = NULL;
	GMainLoop* _tmp2_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_commandService;
	command_service_Start (_tmp0_);
	_tmp1_ = g_main_loop_new (NULL, FALSE);
	_tmp2_ = _tmp1_;
	g_main_loop_run (_tmp2_);
	_g_main_loop_unref0 (_tmp2_);
}


static void service_manager_class_init (ServiceManagerClass * klass) {
	service_manager_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (ServiceManagerPrivate));
	G_OBJECT_CLASS (klass)->finalize = service_manager_finalize;
}


static void service_manager_instance_init (ServiceManager * self) {
	Logger* _tmp0_ = NULL;
	self->priv = SERVICE_MANAGER_GET_PRIVATE (self);
	_tmp0_ = logger_GetInstance ();
	self->priv->_log = _tmp0_;
}


static void service_manager_finalize (GObject* obj) {
	ServiceManager * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_SERVICE_MANAGER, ServiceManager);
	_g_object_unref0 (self->priv->_commandService);
	_logger_unref0 (self->priv->_log);
	G_OBJECT_CLASS (service_manager_parent_class)->finalize (obj);
}


GType service_manager_get_type (void) {
	static volatile gsize service_manager_type_id__volatile = 0;
	if (g_once_init_enter (&service_manager_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ServiceManagerClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) service_manager_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ServiceManager), 0, (GInstanceInitFunc) service_manager_instance_init, NULL };
		GType service_manager_type_id;
		service_manager_type_id = g_type_register_static (G_TYPE_OBJECT, "ServiceManager", &g_define_type_info, 0);
		g_once_init_leave (&service_manager_type_id__volatile, service_manager_type_id);
	}
	return service_manager_type_id__volatile;
}



