/* MessageDeserializer.c generated by valac 0.32.1, the Vala compiler
 * generated from MessageDeserializer.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <gio/gio.h>


#define TYPE_MESSAGE_DESERIALIZER (message_deserializer_get_type ())
#define MESSAGE_DESERIALIZER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MESSAGE_DESERIALIZER, MessageDeserializer))
#define MESSAGE_DESERIALIZER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MESSAGE_DESERIALIZER, MessageDeserializerClass))
#define IS_MESSAGE_DESERIALIZER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MESSAGE_DESERIALIZER))
#define IS_MESSAGE_DESERIALIZER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MESSAGE_DESERIALIZER))
#define MESSAGE_DESERIALIZER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MESSAGE_DESERIALIZER, MessageDeserializerClass))

typedef struct _MessageDeserializer MessageDeserializer;
typedef struct _MessageDeserializerClass MessageDeserializerClass;
typedef struct _MessageDeserializerPrivate MessageDeserializerPrivate;
#define _message_packet_unref0(var) ((var == NULL) ? NULL : (var = (message_packet_unref (var), NULL)))

#define TYPE_BINARY_TYPE (binary_type_get_type ())
#define BINARY_TYPE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_BINARY_TYPE, BinaryType))
#define BINARY_TYPE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_BINARY_TYPE, BinaryTypeClass))
#define IS_BINARY_TYPE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_BINARY_TYPE))
#define IS_BINARY_TYPE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_BINARY_TYPE))
#define BINARY_TYPE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_BINARY_TYPE, BinaryTypeClass))

typedef struct _BinaryType BinaryType;
typedef struct _BinaryTypeClass BinaryTypeClass;

#define TYPE_MESSAGE_PACKET (message_packet_get_type ())
#define MESSAGE_PACKET(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MESSAGE_PACKET, MessagePacket))
#define MESSAGE_PACKET_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MESSAGE_PACKET, MessagePacketClass))
#define IS_MESSAGE_PACKET(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MESSAGE_PACKET))
#define IS_MESSAGE_PACKET_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MESSAGE_PACKET))
#define MESSAGE_PACKET_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MESSAGE_PACKET, MessagePacketClass))

typedef struct _MessagePacket MessagePacket;
typedef struct _MessagePacketClass MessagePacketClass;

#define TYPE_BINARY_NUMBER (binary_number_get_type ())
#define BINARY_NUMBER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_BINARY_NUMBER, BinaryNumber))
#define BINARY_NUMBER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_BINARY_NUMBER, BinaryNumberClass))
#define IS_BINARY_NUMBER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_BINARY_NUMBER))
#define IS_BINARY_NUMBER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_BINARY_NUMBER))
#define BINARY_NUMBER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_BINARY_NUMBER, BinaryNumberClass))

typedef struct _BinaryNumber BinaryNumber;
typedef struct _BinaryNumberClass BinaryNumberClass;
#define _binary_type_unref0(var) ((var == NULL) ? NULL : (var = (binary_type_unref (var), NULL)))

#define TYPE_MESSAGE_REGISTER (message_register_get_type ())
#define MESSAGE_REGISTER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MESSAGE_REGISTER, MessageRegister))
#define MESSAGE_REGISTER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MESSAGE_REGISTER, MessageRegisterClass))
#define IS_MESSAGE_REGISTER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MESSAGE_REGISTER))
#define IS_MESSAGE_REGISTER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MESSAGE_REGISTER))
#define MESSAGE_REGISTER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MESSAGE_REGISTER, MessageRegisterClass))

typedef struct _MessageRegister MessageRegister;
typedef struct _MessageRegisterClass MessageRegisterClass;
typedef struct _message_deserializer_DeserializeData message_deserializer_DeserializeData;

struct _MessageDeserializer {
	GObject parent_instance;
	MessageDeserializerPrivate * priv;
};

struct _MessageDeserializerClass {
	GObjectClass parent_class;
};

typedef enum  {
	DESER_ERROR_WrongData,
	DESER_ERROR_WrongType
} DeserError;
#define DESER_ERROR deser_error_quark ()
struct _message_deserializer_DeserializeData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GSimpleAsyncResult* _async_result;
	BinaryType** data;
	gint data_length1;
	MessagePacket* result;
	BinaryType** _tmp0_;
	gint _tmp0__length1;
	GError* _tmp1_;
	BinaryNumber* number;
	BinaryType** _tmp2_;
	gint _tmp2__length1;
	BinaryType* _tmp3_;
	BinaryNumber* _tmp4_;
	BinaryNumber* _tmp5_;
	GError* _tmp6_;
	gint messageType;
	BinaryNumber* _tmp7_;
	gint _tmp8_;
	MessagePacket* res;
	gint _tmp9_;
	MessageRegister* _tmp10_;
	MessagePacket* _tmp11_;
	BinaryType** _tmp12_;
	gint _tmp12__length1;
	GError * _inner_error_;
};


static gpointer message_deserializer_parent_class = NULL;

GType message_deserializer_get_type (void) G_GNUC_CONST;
enum  {
	MESSAGE_DESERIALIZER_DUMMY_PROPERTY
};
static void message_deserializer_Deserialize_data_free (gpointer _data);
gpointer binary_type_ref (gpointer instance);
void binary_type_unref (gpointer instance);
GParamSpec* param_spec_binary_type (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_binary_type (GValue* value, gpointer v_object);
void value_take_binary_type (GValue* value, gpointer v_object);
gpointer value_get_binary_type (const GValue* value);
GType binary_type_get_type (void) G_GNUC_CONST;
gpointer message_packet_ref (gpointer instance);
void message_packet_unref (gpointer instance);
GParamSpec* param_spec_message_packet (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_message_packet (GValue* value, gpointer v_object);
void value_take_message_packet (GValue* value, gpointer v_object);
gpointer value_get_message_packet (const GValue* value);
GType message_packet_get_type (void) G_GNUC_CONST;
void message_deserializer_Deserialize (BinaryType** data, int data_length1, GAsyncReadyCallback _callback_, gpointer _user_data_);
MessagePacket* message_deserializer_Deserialize_finish (GAsyncResult* _res_);
static gboolean message_deserializer_Deserialize_co (message_deserializer_DeserializeData* _data_);
GQuark deser_error_quark (void);
GType binary_number_get_type (void) G_GNUC_CONST;
gint binary_number_AsInt32 (BinaryNumber* self);
#define MESSAGE_PACKET_REGISTER ((guint8) 0)
MessageRegister* message_register_new (void);
MessageRegister* message_register_construct (GType object_type);
GType message_register_get_type (void) G_GNUC_CONST;
void message_packet_Deserialize (MessagePacket* self, BinaryType** data, int data_length1);
MessageDeserializer* message_deserializer_new (void);
MessageDeserializer* message_deserializer_construct (GType object_type);


static void message_deserializer_Deserialize_data_free (gpointer _data) {
	message_deserializer_DeserializeData* _data_;
	_data_ = _data;
	_message_packet_unref0 (_data_->result);
	g_slice_free (message_deserializer_DeserializeData, _data_);
}


void message_deserializer_Deserialize (BinaryType** data, int data_length1, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	message_deserializer_DeserializeData* _data_;
	BinaryType** _tmp0_ = NULL;
	gint _tmp0__length1 = 0;
	_data_ = g_slice_new0 (message_deserializer_DeserializeData);
	_data_->_async_result = g_simple_async_result_new (NULL, _callback_, _user_data_, message_deserializer_Deserialize);
	g_simple_async_result_set_op_res_gpointer (_data_->_async_result, _data_, message_deserializer_Deserialize_data_free);
	_tmp0_ = data;
	_tmp0__length1 = data_length1;
	_data_->data = _tmp0_;
	_data_->data_length1 = _tmp0__length1;
	message_deserializer_Deserialize_co (_data_);
}


MessagePacket* message_deserializer_Deserialize_finish (GAsyncResult* _res_) {
	MessagePacket* result;
	message_deserializer_DeserializeData* _data_;
	_data_ = g_simple_async_result_get_op_res_gpointer (G_SIMPLE_ASYNC_RESULT (_res_));
	result = _data_->result;
	_data_->result = NULL;
	return result;
}


static gpointer _binary_type_ref0 (gpointer self) {
	return self ? binary_type_ref (self) : NULL;
}


static gboolean message_deserializer_Deserialize_co (message_deserializer_DeserializeData* _data_) {
	switch (_data_->_state_) {
		case 0:
		goto _state_0;
		default:
		g_assert_not_reached ();
	}
	_state_0:
	_data_->_tmp0_ = NULL;
	_data_->_tmp0__length1 = 0;
	_data_->_tmp0_ = _data_->data;
	_data_->_tmp0__length1 = _data_->data_length1;
	if (_data_->_tmp0__length1 < 2) {
		_data_->_tmp1_ = NULL;
		_data_->_tmp1_ = g_error_new_literal (DESER_ERROR, DESER_ERROR_WrongData, "Wrong data");
		_data_->_inner_error_ = _data_->_tmp1_;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
		g_clear_error (&_data_->_inner_error_);
		return FALSE;
	}
	_data_->_tmp2_ = NULL;
	_data_->_tmp2__length1 = 0;
	_data_->_tmp2_ = _data_->data;
	_data_->_tmp2__length1 = _data_->data_length1;
	_data_->_tmp3_ = NULL;
	_data_->_tmp3_ = _data_->_tmp2_[0];
	_data_->_tmp4_ = NULL;
	_data_->_tmp4_ = _binary_type_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_data_->_tmp3_, TYPE_BINARY_NUMBER) ? ((BinaryNumber*) _data_->_tmp3_) : NULL);
	_data_->number = _data_->_tmp4_;
	_data_->_tmp5_ = NULL;
	_data_->_tmp5_ = _data_->number;
	if (_data_->_tmp5_ == NULL) {
		_data_->_tmp6_ = NULL;
		_data_->_tmp6_ = g_error_new_literal (DESER_ERROR, DESER_ERROR_WrongType, "Must be a number");
		_data_->_inner_error_ = _data_->_tmp6_;
		_binary_type_unref0 (_data_->number);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
		g_clear_error (&_data_->_inner_error_);
		return FALSE;
	}
	_data_->_tmp7_ = NULL;
	_data_->_tmp7_ = _data_->number;
	_data_->_tmp8_ = 0;
	_data_->_tmp8_ = binary_number_AsInt32 (_data_->_tmp7_);
	_data_->messageType = _data_->_tmp8_;
	_data_->res = NULL;
	_data_->_tmp9_ = 0;
	_data_->_tmp9_ = _data_->messageType;
	switch (_data_->_tmp9_) {
		case MESSAGE_PACKET_REGISTER:
		{
			_data_->_tmp10_ = NULL;
			_data_->_tmp10_ = message_register_new ();
			_message_packet_unref0 (_data_->res);
			_data_->res = (MessagePacket*) _data_->_tmp10_;
			_data_->_tmp11_ = NULL;
			_data_->_tmp11_ = _data_->res;
			_data_->_tmp12_ = NULL;
			_data_->_tmp12__length1 = 0;
			_data_->_tmp12_ = _data_->data;
			_data_->_tmp12__length1 = _data_->data_length1;
			message_packet_Deserialize (_data_->_tmp11_, _data_->_tmp12_, _data_->_tmp12__length1);
			break;
		}
		default:
		{
			break;
		}
	}
	_data_->result = _data_->res;
	_binary_type_unref0 (_data_->number);
	if (_data_->_state_ == 0) {
		g_simple_async_result_complete_in_idle (_data_->_async_result);
	} else {
		g_simple_async_result_complete (_data_->_async_result);
	}
	g_object_unref (_data_->_async_result);
	return FALSE;
	_message_packet_unref0 (_data_->res);
	_binary_type_unref0 (_data_->number);
	if (_data_->_state_ == 0) {
		g_simple_async_result_complete_in_idle (_data_->_async_result);
	} else {
		g_simple_async_result_complete (_data_->_async_result);
	}
	g_object_unref (_data_->_async_result);
	return FALSE;
}


MessageDeserializer* message_deserializer_construct (GType object_type) {
	MessageDeserializer * self = NULL;
	self = (MessageDeserializer*) g_object_new (object_type, NULL);
	return self;
}


MessageDeserializer* message_deserializer_new (void) {
	return message_deserializer_construct (TYPE_MESSAGE_DESERIALIZER);
}


static void message_deserializer_class_init (MessageDeserializerClass * klass) {
	message_deserializer_parent_class = g_type_class_peek_parent (klass);
}


static void message_deserializer_instance_init (MessageDeserializer * self) {
}


GType message_deserializer_get_type (void) {
	static volatile gsize message_deserializer_type_id__volatile = 0;
	if (g_once_init_enter (&message_deserializer_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (MessageDeserializerClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) message_deserializer_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MessageDeserializer), 0, (GInstanceInitFunc) message_deserializer_instance_init, NULL };
		GType message_deserializer_type_id;
		message_deserializer_type_id = g_type_register_static (G_TYPE_OBJECT, "MessageDeserializer", &g_define_type_info, 0);
		g_once_init_leave (&message_deserializer_type_id__volatile, message_deserializer_type_id);
	}
	return message_deserializer_type_id__volatile;
}



